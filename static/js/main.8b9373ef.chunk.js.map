{"version":3,"sources":["components/Searchbar/Searchbar.module.css","components/Modal/Modal.module.css","components/ImageGalleryItem/ImageGalleryItem.module.css","components/Button/Button.module.css","components/Gallery/Galerry.module.css","components/Searchbar/Searchbar.js","components/Button/Button.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Gallery/Galerry.js","services/pexelsApi.js","App.js","index.js"],"names":["module","exports","Searchbar","state","queryValue","handleChange","e","console","log","target","value","setState","handleSubmit","preventDefault","getQuery","props","this","className","s","SearchForm","onSubmit","type","SearchForm_button","SearchForm_button_label","SearchForm_input","autofocus","placeholder","name","onChange","Component","Button","children","onClick","allyProps","defaultProps","modalRoot","document","querySelector","Modal","handleKeyDown","code","onClose","handleBackdropClick","event","currentTarget","window","addEventListener","removeEventListener","source","createPortal","Modal__backdrop","Modal__content","src","alt","ImageGalleryItem","el","getElem","href","tiny","ImageGalleryItem_image","genId","Gallery","elem","showModal","toggleModal","gallery","ImageGallery","map","q","p","a","pP","key","baseUrl","params","url","options","method","headers","Authorization","fetch","response","json","result","data","photos","getFetch","App","query","page","fetchGallery","then","prevState","catch","err","prevProps","prev","aria-label","ReactDOM","render","StrictMode","getElementById"],"mappings":"2IACAA,EAAOC,QAAU,CAAC,UAAY,6BAA6B,WAAa,8BAA8B,kBAAoB,qCAAqC,wBAA0B,2CAA2C,iBAAmB,sC,mBCAvPD,EAAOC,QAAU,CAAC,gBAAkB,+BAA+B,eAAiB,8BAA8B,MAAQ,uB,gBCA1HD,EAAOC,QAAU,CAAC,iBAAmB,2CAA2C,uBAAyB,mD,mBCAzGD,EAAOC,QAAU,CAAC,OAAS,yB,gBCA3BD,EAAOC,QAAU,CAAC,aAAe,gC,8LCmDlBC,E,4MA/CXC,MAAQ,CACJC,WAAY,I,EAIpBC,aAAe,SAACC,GACZC,QAAQC,IAAIF,EAAEG,OAAOC,OACrB,EAAKC,SAAS,CAAEP,WAAYE,EAAEG,OAAOC,S,EAGzCE,aAAe,SAACN,GACZA,EAAEO,kBAEFC,EADqB,EAAKC,MAAlBD,UACC,EAAKX,MAAMC,YACpB,EAAKD,MAAMC,WAAa,I,4CAGxB,WAAU,IACCC,EAA8BW,KAA9BX,aAAcO,EAAgBI,KAAhBJ,aACZR,EAAeY,KAAKb,MAApBC,WACT,OACI,mCAEJ,oCAAM,wBAAQa,UAAWC,IAAEhB,UAArB,SACT,uBAAMe,UAAWC,IAAEC,WAAYC,SAAUR,EAAzC,UACD,wBAAQS,KAAK,SAASJ,UAAWC,IAAEI,kBAAnC,SACA,sBAAML,UAAWC,IAAEK,wBAAnB,sBAGA,uBACAN,UAAWC,IAAEM,iBACXH,KAAK,OAEPI,WAAS,EACTC,YAAY,2BACRC,KAAK,QACLC,SAAUvB,EACVK,MAAON,kB,GAvCSyB,a,iCCClBC,EAAS,SAAC,GAAD,IAAGC,EAAH,EAAGA,SAAUC,EAAb,EAAaA,QAAYC,EAAzB,6CACX,gDAAQZ,KAAK,SAASJ,UAAWC,IAAEY,OAAQE,QAASA,GAAaC,GAAjE,aACCF,MAILD,EAAOI,aAAe,CACpBF,QAAS,kBAAM,MACfD,SAAU,MASGD,Q,kCCjBTK,EAAYC,SAASC,cAAc,eA6C1BC,E,4MA9BVC,cAAgB,SAAAjC,GACF,WAAXA,EAAEkC,OACJjC,QAAQC,IAAI,kKAEZ,EAAKO,MAAM0B,Y,EAIbC,oBAAsB,SAAAC,GAKdA,EAAMC,gBAAkBD,EAAMlC,QACpC,EAAKM,MAAM0B,W,uDA1Bb,WAEII,OAAOC,iBAAiB,UAAW9B,KAAKuB,iB,kCAI5C,WAEIM,OAAOE,oBAAoB,UAAW/B,KAAKuB,iB,oBAqB/C,WAAU,IAAD,EACwBvB,KAAKD,MAA1BgB,EADH,EACGA,SAAUiB,EADb,EACaA,OAClB,OAAOC,uBACH,qBAAKhC,UAAWC,IAAEgC,gBAAiBlB,QAAShB,KAAK0B,oBAAjD,SACI,sBAAKzB,UAAWC,IAAEiC,eAAlB,UACI,qBAAKC,IAAKJ,EAAQK,IAAI,KACrBtB,OACDI,O,GArCAN,a,yBCkBLyB,EApBU,SAAC,GAAoB,IAAlBC,EAAiB,EAAjBA,GAAIC,EAAa,EAAbA,QAC5B,OACI,oBAAsBvC,UAAWC,IAAEoC,iBAAnC,SACY,8BACA,mBACCG,KAAK,IAAIzB,QAAS,WACfwB,EAAQD,IAFZ,SAKA,qBACIH,IAAKG,EAAGH,IAAIM,KACZL,IAAKE,EAAGF,IACRpC,UAAWC,IAAEyC,8BAVhBC,gBC0CNC,E,4MAxCX1D,MAAQ,CACJC,WAAY,GACZ0D,KAAM,KACNC,WAAY,G,EAGhBC,YAAc,WACV,EAAKrD,UAAS,kBAAoB,CAC9BoD,WADU,EAAGA,e,EAMrBP,QAAU,SAACM,GACX,EAAKE,cACL,EAAKrD,SAAS,CAAEmD,U,4CAGhB,WAAU,IACEG,EAAWjD,KAAKD,MAAhBkD,QAC2BT,GAAYxC,KAAxCX,aAAwCW,KAA1BJ,aAA0BI,KAAZwC,SAF9B,EAGkCxC,KAAKb,MAAxB4D,GAHf,EAGI3D,WAHJ,EAGe2D,WAAUD,EAHzB,EAGyBA,KAC9B,OACI,qCAEDC,GAAa,cAAC,EAAD,CAAOtB,QAAWzB,KAAKgD,YAAahB,OAAQc,EAAKV,IAAIM,OAGzE,oBAAIzC,UAAWC,IAAEgD,aAAjB,SACWD,EAAQE,KAAI,SAACZ,GAAD,OACX,cAAC,EAAD,CAAkBC,QAASA,EAASD,GAAIA,gB,GAhClC1B,a,qECNtB,WAAwBuC,EAAGC,GAA3B,2CAAAC,EAAA,6DAA8BC,EAA9B,+BAAmC,GAE3BC,EAFR,2DAGQC,EAHR,4BAOMC,EAPN,wBAOgCN,EAPhC,qBAO8CG,EAP9C,iBAOyDF,GAGnDM,EAAMF,EAAUC,EAGhBE,EAAU,CACZC,OAAQ,MACRC,QAAS,CACPC,cAAeP,IAhBrB,SAqByBQ,MAAML,EAAKC,GArBpC,cAqBQK,EArBR,iBAsBuBA,EAASC,OAtBhC,eAsBQC,EAtBR,OAuBQC,EAAOD,EAAOE,OAvBtB,kBAwBSD,GAxBT,6C,sBA2Be,IChBPE,E,8CA8EOC,E,4MA1EbpF,MAAQ,CACNqF,MAAO,GACPC,KAAM,EACNxB,QAAS,I,EA0BXnD,SAAW,SAAC0E,GACV,EAAK7E,SAAS,CAAC6E,W,EAcjBE,aAAe,WAAO,IAAD,EACa,EAAKvF,MAA7BqF,EADW,EACXA,MAAOC,EADI,EACJA,KADI,EACExB,QACnBqB,EAASE,EAAOC,GACbE,MAAK,SAACR,GACL,EAAKxE,UAAS,SAACiF,GAAD,MAAgB,CAC5B3B,QAAQ,GAAD,mBAAM2B,EAAU3B,SAAhB,YAA4BkB,IACnCM,KAAMG,EAAUH,KAAO,SAG1BI,OAAM,SAACC,Q,uDA9Cb,WAAqB,IAAD,SACK9E,KAAKb,MAArBqF,EADW,EACXA,MAAOC,EADI,EACJA,KACfH,EAASE,EAAOC,GACbE,MAAK,SAACR,GACL5E,QAAQC,IAAI2E,GACZ,EAAKxE,SAAS,CAAEsD,QAAQ,YAAKkB,QAE9BU,OAAM,SAACC,S,gCAEX,SAAmBC,EAAWH,GAAY,IAAD,SAChB5E,KAAKb,MAArBqF,EADgC,EAChCA,MAAOC,EADyB,EACzBA,KACXD,IAAUI,EAAUJ,OACtBF,EAASE,EAAOC,GACbE,MAAK,SAACR,GACL5E,QAAQC,IAAI2E,GACZ,EAAKxE,UAAS,SAACqF,GAAD,MAAW,CAAE/B,QAAQ,GAAD,mBAAM+B,EAAK/B,SAAX,YAAuBkB,WAE1DU,OAAM,SAACC,S,oBAiCd,WAAU,IAAD,EACwB9E,KAAKb,MAA5B8D,EADD,EACCA,QACAnD,GAFD,EACUiD,UACI/C,KAAbF,UAEN,OACE,gCACE,oBAAIG,UAAU,QAAd,2BACA,cAAC,EAAD,CAAWH,SAAUA,IACrB,cAAC,EAAD,CAASmD,QAASA,EAASnD,SAAUA,IACrC,cAAC,EAAD,CAAQmF,aAAW,4EAAgBjE,QAAWhB,KAAK0E,aAAnD,8B,GAnEQ7D,aCRlBqE,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFhE,SAASiE,eAAe,W","file":"static/js/main.8b9373ef.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__2rEGz\",\"SearchForm\":\"Searchbar_SearchForm__Uwj_B\",\"SearchForm_button\":\"Searchbar_SearchForm_button__3bTjQ\",\"SearchForm_button_label\":\"Searchbar_SearchForm_button_label__3Pr2B\",\"SearchForm_input\":\"Searchbar_SearchForm_input__1s6qK\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Modal__backdrop\":\"Modal_Modal__backdrop__1ixbw\",\"Modal__content\":\"Modal_Modal__content__2erN1\",\"Modal\":\"Modal_Modal__1KKyG\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__3Y69O\",\"ImageGalleryItem_image\":\"ImageGalleryItem_ImageGalleryItem_image__1GC4g\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__1eHUT\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"Galerry_ImageGallery__1DVlB\"};","import React, { Component } from \"react\";\r\nimport s from \"./Searchbar.module.css\";\r\n\r\nclass Searchbar extends Component\r\n{\r\n    state = {\r\n        queryValue: \"\",\r\n    };\r\n    \r\n   \r\nhandleChange = (e) => {\r\n    console.log(e.target.value)\r\n    this.setState({ queryValue: e.target.value })\r\n    }\r\n\r\nhandleSubmit = (e) => {\r\n    e.preventDefault();\r\n    const { getQuery } = this.props;\r\n    getQuery(this.state.queryValue)\r\n    this.state.queryValue = \"\";\r\n}\r\n    \r\n    render() {\r\n        const {handleChange, handleSubmit} = this;\r\n        const {  queryValue } = this.state;\r\n        return (\r\n            <>\r\n                 \r\n        <div> <header className={s.Searchbar}>         \r\n     <form className={s.SearchForm} onSubmit={handleSubmit}>\r\n    <button type=\"submit\" className={s.SearchForm_button}>\r\n    <span className={s.SearchForm_button_label}>Search</span>\r\n    </button>\r\n\r\n    <input\r\n    className={s.SearchForm_input}\r\n      type=\"text\"\r\n    //   autocomplete=\"off\"\r\n    autofocus\r\n    placeholder=\"Search images and photos\"\r\n        name=\"query\"\r\n        onChange={handleChange}\r\n        value={queryValue}\r\n    />\r\n  </form>\r\n            </header></div>\r\n\r\n        </>\r\n    )\r\n    }\r\n}\r\n\r\nexport default Searchbar","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from \"./Button.module.css\"\r\n\r\nconst Button = ({ children, onClick, ...allyProps }) => (\r\n    <button type=\"button\" className={s.Button} onClick={onClick} {...allyProps}>\r\n    {children}\r\n  </button>\r\n);\r\n\r\nButton.defaultProps = {\r\n  onClick: () => null,\r\n  children: null,\r\n};\r\n\r\nButton.propTypes = {\r\n  onClick: PropTypes.func,\r\n  children: PropTypes.node,\r\n  'aria-label': PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Button;","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport s from \"./Modal.module.css\"\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n    componentDidMount() {\r\n        // console.log('Modal componentDidMount');\r\n        window.addEventListener('keydown', this.handleKeyDown)\r\n    \r\n    }\r\n\r\n    componentWillUnmount() {\r\n        // console.log('Modal componentWillUnmount');\r\n        window.removeEventListener('keydown', this.handleKeyDown);\r\n\r\n    }\r\n\r\n     handleKeyDown = e => {\r\n    if (e.code === 'Escape') {\r\n      console.log('Нажали ESC, нужно закрыть модалку');\r\n\r\n      this.props.onClose();\r\n    }\r\n    };\r\n    \r\n    handleBackdropClick = event => {\r\n        // console.log('Кликнули в бекдроп');\r\n        // console.log('currentTarget: ', event.currentTarget);\r\n        // console.log('target: ', event.target);\r\n\r\n        if (event.currentTarget === event.target) {\r\n      this.props.onClose();\r\n    }\r\n    }\r\n    render() {\r\n        const { children, source } = this.props;\r\n        return createPortal(\r\n            <div className={s.Modal__backdrop} onClick={this.handleBackdropClick}>\r\n                <div className={s.Modal__content}>\r\n                    <img src={source} alt=\"\" />\r\n                    {children}</div>\r\n            </div>, modalRoot,\r\n            \r\n        )\r\n    }\r\n}\r\n\r\nexport default Modal;\r\n\r\n","import React from \"react\";\r\nimport s from \"./ImageGalleryItem.module.css\";\r\nimport { v4 as genId } from \"uuid\";\r\n\r\nconst ImageGalleryItem = ({ el, getElem}) => {\r\n    return (\r\n        <li key key={genId()} className={s.ImageGalleryItem}>  \r\n                    <div >\r\n                    <a\r\n                     href=\"#\" onClick={() => {\r\n                        getElem(el);\r\n                      }}\r\n                    >\r\n                    <img\r\n                        src={el.src.tiny}\r\n                        alt={el.alt}\r\n                        className={s.ImageGalleryItem_image} />\r\n                    </a>\r\n                  </div>\r\n                        \r\n                    </li>\r\n    )\r\n}\r\n\r\nexport default ImageGalleryItem","import React, { Component } from \"react\";\r\nimport s from \"./Galerry.module.css\";\r\nimport { v4 as genId } from \"uuid\";\r\nimport Modal from \"../Modal/Modal\"\r\nimport ImageGalleryItem from \"../ImageGalleryItem/ImageGalleryItem\";\r\n\r\nclass Gallery extends Component\r\n{\r\n    state = {\r\n        queryValue: \"\",\r\n        elem: null,\r\n        showModal : false\r\n    };\r\n    \r\n    toggleModal = () => {\r\n        this.setState(({ showModal }) => ({\r\n            showModal: !showModal,\r\n        }));\r\n    \r\n    }\r\n  \r\n    getElem = (elem) => {\r\n    this.toggleModal();\r\n    this.setState({ elem });\r\n    }\r\n    \r\n    render() {\r\n        const { gallery} = this.props;\r\n        const {handleChange, handleSubmit, getElem } = this;\r\n        const {  queryValue,showModal,elem } = this.state;\r\n        return (\r\n            <>\r\n        \r\n          {showModal && <Modal onClose = {this.toggleModal} source={elem.src.tiny}>\r\n          </Modal>}\r\n                    \r\n    <ul className={s.ImageGallery}>\r\n              {gallery.map((el) => (\r\n                <ImageGalleryItem getElem={getElem} el={el}/>\r\n   \r\n))}\r\n</ul>\r\n\r\n        </>\r\n    )\r\n    }\r\n}\r\n\r\nexport default Gallery","async function getFetch(q, p, pP = 12) {\r\n//   let key = \"21072746-8c3dd0d1e8e29ef8d58afec32\";\r\n    let key = `563492ad6f917000010000013bbd01457a39431887d74f69015c0d48`;\r\n  const baseUrl = `https://api.pexels.com/v1`;\r\n\r\n  // прописываем параметры запроса, согласно доков API\r\n  // ДОБАВЛЯЕМ ПАРАМЕТР ДЛЯ СТРАНИЦ\r\n  let params = `/search?query=${q}&per_page=${pP}&page=${p}`;\r\n\r\n  // сливаем встроку запроса перед отправкой\r\n  let url = baseUrl + params;\r\n\r\n  // создаем объект опций для запроса, по докам API, для передачи ключа\r\n  let options = {\r\n    method: \"GET\",\r\n    headers: {\r\n      Authorization: key,\r\n    },\r\n  };\r\n\r\n  // собственно запрос и обработка ответа на него\r\n  const response = await fetch(url, options);\r\n  const result = await response.json();\r\n  const data = result.photos;\r\n  return data;\r\n}\r\n\r\nexport default { getFetch };","import React, { Component } from \"react\";\n\nimport \"./App.css\";\n\nimport { v4 as genId } from \"uuid\";\n\n// import Modal from \"./components/Modal/Modal\";\nimport Searchbar from \"./components/Searchbar/Searchbar\";\nimport Button from \"./components/Button/Button\";\nimport Gallery from \"./components/Gallery/Galerry\";\nimport getGalleryItems from \"./services/pexelsApi\";\nconst { getFetch } = getGalleryItems;\n\n\nclass App extends Component {\n  state = {\n    query: \"\",\n    page: 1,\n    gallery: [],\n    // showModal : false\n  }\n  \n   componentDidMount() {\n    const { query, page } = this.state;\n    getFetch(query, page)\n      .then((result) => {\n        console.log(result);\n        this.setState({ gallery: [...result] });\n      })\n      .catch((err) => {});\n  }\n   componentDidUpdate(prevProps, prevState) {\n    const { query, page } = this.state;\n    if (query !== prevState.query) {\n      getFetch(query, page)\n        .then((result) => {\n          console.log(result);\n          this.setState((prev) => ({ gallery: [...prev.gallery, ...result] } ));\n        })\n        .catch((err) => { });\n      // this.fetchGallery();\n    }\n  }\n  \n  getQuery = (query) => {\n    this.setState({query})\n    \n  }\n\n  // fetchGallery = () => {\n  // const { query, page } = this.state;\n  //   getFetch(query, page)\n  //       .then((result) => {\n  //         console.log(result);\n  //         this.setState((prevState) => ({ page: prevState.page + 1, }));\n  //       })\n    \n  // }\n\n  fetchGallery = () => {\n    const { query, page, gallery} = this.state;\n      getFetch(query, page)\n        .then((result) => {\n          this.setState((prevState) => ({\n            gallery: [...prevState.gallery, ...result],\n            page: prevState.page + 1,\n          })); \n        })\n        .catch((err) => { });\n    \n  }\n\n  render() {\n    const { gallery, showModal } = this.state\n    const { getQuery } = this;\n  \n      return (\n        <div>\n          <h1 className=\"title\">Search images</h1>\n          <Searchbar getQuery={getQuery}/>\n          <Gallery gallery={gallery} getQuery={getQuery}/>\n          <Button aria-label=\"Загрузить еще\" onClick = {this.fetchGallery}>Load more</Button>\n          \n        </div>\n    );\n  }\n}\n\n  \nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n\n"],"sourceRoot":""}